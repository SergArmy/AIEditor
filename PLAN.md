# PLAN

## Этап 0. Подготовка (2025-11-08)
- [x] Зафиксировать требования и контекст в `ReadME`.
- [x] Сформировать приоритизированный `TODO` с критериями готовности.
- [ ] Завести журнал прогресса (`PROGRESS.md`) для фиксации результатов по этапам.

## Этап 1. Базовая инфраструктура (2025-11-08 — 2025-11-15)
- Реализовать `BaseBlock`, `EditableBlock` и `document-block`.
- Настроить `DocumentStore` (Zustand + Immer) с базовым CRUD и undo/redo.
- Создать `text-block` и минимальный пример `examples/minimal.html`.
- Acceptance: пример демонстрирует создание/редактирование текста, сериализацию документа и восстановление состояния из `DocumentStore`.

## Этап 2. Система редактирования (2025-11-16 — 2025-11-23)
- Подключить Monaco через сервис, реализовать `code-block`.
- Добавить базовые компоненты UI: toolbar и контекстное меню с командами блоков.
- Расширить `DocumentStore` для горячих клавиш, истории команд и синхронизации состояния UI.
- Acceptance: кодовый блок редактируется с подсветкой, команды вставки/удаления через меню работают, состояние восстановимо после перезагрузки.

## Этап 3. Пользовательские взаимодействия (2025-11-24 — 2025-11-30)
- Реализовать drag & drop блоков, множественное выделение.
- Интегрировать `RoleStore` и `roles-block`, синхронизировать с DocumentStore.
- Расширить toolbar контекстными действиями и иконками.
- Acceptance: перетаскивание блоков без потери состояния, роли отображаются и управляются централизованно.

## Этап 4. Специализированные блоки (2025-12-01 — 2025-12-07)
- Добавить `diagram-block`, `checklist-block`, `action-block`, `steps-block`, `definition-block`.
- Подготовить `examples/blocks-showcase.html` с демонстрацией сценариев.
- Наладить систему шаблонов и reusable-стилей для блоков.
- Acceptance: showcase отражает все новые блоки, поддерживается сериализация и повторное открытие документа.

## Этап 5. Интеграция 1С и экспорт (2025-12-08 — 2025-12-15)
- Расширить подсветку 1С в Monaco и добавить ссылки на метаданные.
- Реализовать экспорт в HTML/PDF и импорт из JSON-шаблонов.
- Настроить `export-service` и `template-service`.
- Acceptance: документ из редактора экспортируется в HTML/PDF, импортируемый JSON корректно восстанавливает структуру.

## Этап 6. Полировка и стабильность (2025-12-16 — 2025-12-22)
- Оптимизировать производительность (виртуализация для 200+ блоков).
- Добавить тёмную тему, улучшить стили и accessibility (WCAG).
- Завершить документацию (`docs/ARCHITECTURE.md`, `BLOCK_SPECIFICATION.md`, `DEVELOPMENT_GUIDE.md`).
- Acceptance: нагрузочные сценарии проходят без деградации, документация актуальна, UI соответствует требованиям доступности.

## Контроль и пересмотр
- По завершении каждого этапа обновлять `PROGRESS.md` и проводить ревизию плана.
- Раз в неделю оценивать риски, корректировать сроки и приоритеты задач.
- Фиксировать зависимости и блокеры в отдельном разделе `PROGRESS.md` при появлении.

